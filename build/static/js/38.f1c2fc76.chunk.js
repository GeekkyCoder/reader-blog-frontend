"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[38],{3038:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var r=n(1413),o=n(4165),i=n(5861),s=n(9439),a=n(4554),c=n(9164),l=n(3543),d=n(4070),p=n(6314),u=n(890),m=n(68),h=n(3044),x=n(1918),v=n(4721),f=n(6151),Z=n(7621),g=n(2169),j=n(9504),y=n(2791),b=n(5717),w=n(7689),S=(n(1006),n(1243)),k=n(6517),C=n(2888),I=n(6144),T=n(4801),O=n(9313),A=n(1939),W=n(2554),G=n(6934),_=n(4708),E=n(5519),M=n(1748),P=n(184),z=function(e){var t=e.comment;return(0,P.jsx)(a.Z,{my:"1em",children:(0,P.jsxs)(a.Z,{display:"flex",alignItems:"center",children:[(0,P.jsx)(h.Z,{sx:{alignSelf:"flex-start"},src:t.profileImage,alt:t.name}),(0,P.jsxs)(a.Z,{mx:"1em",children:[(0,P.jsx)(u.Z,{variant:"p",component:"p",fontWeight:800,children:t.name}),(0,P.jsx)(u.Z,{variant:"p",component:"p",fontSize:"14px",color:"GrayText",children:t.bio}),(0,P.jsx)(u.Z,{variant:"p",component:"p",color:"GrayText",children:(0,k.p)(t.createdAt)}),(0,P.jsx)(a.Z,{my:"1em",children:(0,P.jsx)(u.Z,{variant:"p",component:"p",fontWeight:800,children:t.content})})]})]})})},R=n(3392),N=n(9709),B=n(169),H=n(148),F=n(9434),D=n(8431),X=n(9029),K=(0,G.ZP)("div")((function(e){var t=e.theme;return{height:"100%",backgroundColor:"light"===t.palette.mode?E.Z[100]:t.palette.background.default}}));var L=function(e){var t=e.isCommentModalOpen,n=e.setIsCommentModalOpen,r=e.blogId,m=e.setHasCommented,h=e.hasCommented,x=(0,y.useState)(""),v=(0,s.Z)(x,2),Z=v[0],g=v[1],j=(0,y.useState)([]),b=(0,s.Z)(j,2),w=b[0],k=b[1],C=(0,F.I0)(),I=(0,F.v9)(X.VR),T=(0,F.v9)(X.x$),O=(0,F.v9)(X.f8),A=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){var n,i,s,a,c,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={content:Z},e.prev=2,C((0,D.GA)()),e.next=6,S.Z.post("https://reader-blogging-web.onrender.com/api/v1/comments/createComment?postId=".concat(r," "),n,{withCredentials:!0});case 6:i=e.sent,i.data,m((function(e){return!e})),C((0,D.pX)("comment posted")),C((0,D.S1)(!0)),setTimeout((function(){C((0,D.S1)(!1))}),5e3),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(2),C((0,D.Go)((null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.msg)||"failed to comment")),C((0,D.S1)(!0)),C((0,D.pX)((null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.msg)||"failed to comment")),setTimeout((function(){C((0,D.S1)(!1))}),5e3);case 20:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,y.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.get("https://reader-blogging-web.onrender.com/api/v1/comments/allComments?post=".concat(r),{withCredentials:!0});case 3:t=e.sent,n=t.data,k(null===n||void 0===n?void 0:n.comments[0].comments),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[h,r]),(0,P.jsxs)(a.Z,{children:[(0,P.jsx)(l.Z,{open:T,anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,P.jsx)(d.Z,{severity:O?"error":"success",children:O})}),(0,P.jsxs)(K,{children:[(0,P.jsx)(_.ZP,{}),(0,P.jsx)(W.xB,{styles:{".MuiDrawer-root > .MuiPaper-root":{height:"calc(50% - ".concat(56,"px)"),overflow:"scroll"}}}),(0,P.jsx)(M.Z,{anchor:"bottom",open:t,swipeAreaWidth:56,disableSwipeToOpen:!1,ModalProps:{keepMounted:!0},children:(0,P.jsxs)(c.Z,{children:[(0,P.jsxs)(a.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",my:"2em",children:[(0,P.jsxs)(u.Z,{fontSize:{xs:"1.2rem",sm:"2rem"},variant:"p",component:"p",fontWeight:800,color:"GrayText",children:["Responses: ",w.length]}),(0,P.jsx)(f.Z,{onClick:function(){return n(!1)},variant:"contained",color:"inherit",startIcon:(0,P.jsx)(B.Z,{fontSize:"large"})})]}),(0,P.jsxs)(p.Z,{children:[(0,P.jsxs)(a.Z,{component:"form",my:"1em",onSubmit:A,children:[(0,P.jsx)(R.Z,{sx:{width:"100%"},variant:"outlined",multiline:!0,placeholder:"write a comment ? \u270d",label:"comment",onChange:function(e){g(e.target.value)},name:"content"}),(0,P.jsx)(a.Z,{my:"1em",children:(0,P.jsx)(N.Z,{loading:I,type:"submit",variant:"text",color:"inherit",startIcon:(0,P.jsx)(H.Z,{fontSize:"medium"}),children:"Post"})})]}),w.length>0?w.map((function(e){return(0,P.jsx)(z,{comment:e},e.id)})):(0,P.jsx)(u.Z,{my:"2em",variant:"p",component:"p",fontSize:"1.5rem",fontWeight:"bold",children:"No Comments On This Post Yet"})]})]})})]})]})},U={infinite:!0,autoplay:!0,speed:1e3,slidesToShow:2,slidesToScroll:1,swipeToSlide:!0,arrows:!1,dots:!1,pauseOnHover:!0,responsive:[{breakpoint:1200,settings:{arrows:!1,slidesToShow:2}},{breakpoint:768,settings:{arrows:!1,slidesToShow:1}},{breakpoint:480,settings:{arrows:!1,slidesToShow:1}}]},V=function(){var e,t=(0,y.useState)({}),n=(0,s.Z)(t,2),W=n[0],G=n[1],_=(0,y.useState)([]),E=(0,s.Z)(_,2),M=E[0],z=E[1],R=(0,y.useState)({}),N=(0,s.Z)(R,2),B=N[0],H=N[1],F=(0,y.useState)(!1),D=(0,s.Z)(F,2),X=D[0],K=D[1],V=(0,y.useState)(!1),Y=(0,s.Z)(V,2),$=Y[0],q=Y[1],J=(0,y.useState)(!1),Q=(0,s.Z)(J,2),ee=Q[0],te=Q[1],ne=(0,y.useState)(!1),re=(0,s.Z)(ne,2),oe=re[0],ie=re[1],se=(0,y.useState)(!1),ae=(0,s.Z)(se,2),ce=ae[0],le=ae[1],de=(0,w.UO)().blogId,pe=(0,y.useState)(de),ue=(0,s.Z)(pe,2),me=ue[0],he=ue[1];(0,y.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.get("https://reader-blogging-web.onrender.com/api/v1/posts/blogs?post=".concat(me),{withCredentials:!0});case 3:t=e.sent,n=t.data,G(null===n||void 0===n?void 0:n.post),q(!0),setTimeout((function(){q(!1)}),3e3),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),q(!0),setTimeout((function(){q(!1)}),3e3),K(!0);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[B,me,ce]);var xe=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.prev=1,e.next=4,S.Z.patch("https://reader-blogging-web.onrender.com/api/v1/posts/likepost?post=".concat(de),{withCredentials:!0});case 4:t=e.sent,n=t.data,H(null===n||void 0===n?void 0:n.post),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!1),e.prev=1,e.next=4,S.Z.patch("https://reader-blogging-web.onrender.com/api/v1/posts/unlikepost?post=".concat(de),{withCredentials:!0});case 4:t=e.sent,n=t.data,H(null===n||void 0===n?void 0:n.post),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();(0,y.useEffect)((function(){if(W){var e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.get("https://reader-blogging-web.onrender.com/api/v1/posts/getMoreUserPosts?postId=".concat(me,"&userId=").concat(null===W||void 0===W?void 0:W.createdBy),{withCredentials:!0});case 3:t=e.sent,n=t.data,z(n.filteredPosts),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}}),[W,me]);return(0,P.jsxs)(a.Z,{children:[Object.keys(W).length>0&&(0,P.jsx)(L,{hasCommented:ce,setHasCommented:le,blogId:me,isCommentModalOpen:oe,setIsCommentModalOpen:ie}),(0,P.jsxs)(c.Z,{children:[X&&(0,P.jsx)(l.Z,{open:$,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,P.jsx)(d.Z,{severity:"error",children:"could not fetch blog"})}),Object.keys(W).length>0?(0,P.jsx)(p.Z,{direction:"column",alignItems:"center",display:"flex",mt:"3em",children:(0,P.jsxs)(a.Z,{width:{xs:"100%",sm:"70%"},children:[(0,P.jsx)(u.Z,{variant:"h2",component:"h3",fontWeight:{xs:800,sm:800},fontSize:{xs:"1.5rem",sm:"3rem"},children:W.title}),(0,P.jsxs)(a.Z,{display:"flex",alignItems:"center",my:"2em",position:"relative",children:[(0,P.jsx)(m.Z,{title:"".concat(W.name),children:(0,P.jsx)(h.Z,{sx:{alignSelf:"flex-start",width:56,height:56},src:null===W||void 0===W?void 0:W.profileImage,alt:null===W||void 0===W?void 0:W.profileImage})}),(0,P.jsxs)(a.Z,{ml:".5em",mb:{xs:"1em",sm:"0em"},children:[(0,P.jsx)(u.Z,{component:"p",variant:"p",children:null===W||void 0===W?void 0:W.name}),W.bio&&(0,P.jsx)(u.Z,{variant:"p",component:"p",my:".5em",color:"GrayText",children:W.bio}),(0,P.jsxs)(u.Z,{component:"p",variant:"p",color:"GrayText",children:["Published on",(0,P.jsx)(u.Z,{ml:".5em",component:"span",variant:"span",children:(0,k.p)(null===W||void 0===W?void 0:W.createdAt)}),(0,P.jsx)(a.Z,{my:"1em",children:(0,P.jsx)(x.Z,{variant:"filled",label:null===W||void 0===W?void 0:W.tags,size:"large"})})]})]}),(0,P.jsxs)(u.Z,{color:"GrayText",position:"absolute",bottom:{xs:"-1.5rem",sm:"-1rem"},right:"0",component:"p",variant:"p",children:["last updated: ",(0,k.p)(W.updatedAt)]})]}),(0,P.jsx)(v.Z,{}),(0,P.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",my:"1em",children:[(0,P.jsxs)(p.Z,{direction:"row",children:[(0,P.jsx)(m.Z,{title:"like this blog post",children:(0,P.jsx)(f.Z,{startIcon:ee?(0,P.jsx)(I.Z,{onClick:ve}):(0,P.jsx)(C.Z,{onClick:xe}),variant:"text",color:"inherit",children:null===W||void 0===W?void 0:W.likes})}),(0,P.jsx)(m.Z,{title:"comments",children:(0,P.jsx)(f.Z,{startIcon:(0,P.jsx)(T.Z,{}),onClick:function(){return W._id,void ie(!0)},variant:"text",color:"inherit",children:null===W||void 0===W||null===(e=W.comments)||void 0===e?void 0:e.length})})]}),(0,P.jsx)(m.Z,{title:"save this blog post",children:(0,P.jsx)(f.Z,{startIcon:(0,P.jsx)(O.Z,{fontSize:"large"}),variant:"text",color:"inherit"})})]}),(0,P.jsx)(v.Z,{}),(0,P.jsx)("img",{style:{margin:"1em 0"},width:"100%",src:null===W||void 0===W?void 0:W.image,alt:"blog-".concat(null===W||void 0===W?void 0:W._id)}),(0,P.jsx)(u.Z,{variant:"p",lineHeight:"30px",my:"1em",fontWeight:400,component:"p",children:null===W||void 0===W?void 0:W.description}),(0,P.jsxs)(a.Z,{bgcolor:"#FAFAFA",p:"1em",children:[(0,P.jsx)(a.Z,{display:"flex",alignItems:{xs:"center",sm:"flex-start"},justifyContent:{xs:"center",sm:"flex-start"},children:(0,P.jsxs)(a.Z,{flex:{xs:1,sm:2},py:"1em",children:[(0,P.jsx)("img",{style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"50%"},src:W.profileImage,alt:W.name}),(0,P.jsxs)(u.Z,{component:"h3",variant:"p",lineHeight:"30px",fontWeight:800,children:["Written by ",W.name]}),(0,P.jsx)(u.Z,{component:"h3",variant:"p",lineHeight:"30px",fontWeight:400,color:"GrayText",children:W.bio})]})}),(0,P.jsx)(v.Z,{}),M.length>0&&(0,P.jsxs)(a.Z,{my:"2em",children:[(0,P.jsxs)(u.Z,{py:"2em",component:"p",variant:"p",fontWeight:600,children:["More From ",W.name," \ud83d\udc47"]}),(0,P.jsx)(a.Z,{children:(0,P.jsx)(b.Z,(0,r.Z)((0,r.Z)({},U),{},{className:"slider-styles",children:M.map((function(e){return(0,P.jsxs)(Z.Z,{onClick:function(){return t=e._id,void he(t);var t},maxWidth:250,sx:{height:"450px"},children:[(0,P.jsx)(g.Z,{component:"img",alt:e.title,height:"140",image:e.image}),(0,P.jsxs)(j.Z,{children:[(0,P.jsxs)(a.Z,{display:"flex",alignItems:"center",children:[(0,P.jsx)(h.Z,{src:e.profileImage,alt:e.name}),(0,P.jsx)(u.Z,{ml:".5em",component:"p",variant:"p",fontWeight:200,children:e.name})]}),(0,P.jsx)(u.Z,{maxWidth:300,my:".5em",component:"h3",variant:"p",fontWeight:800,children:e.title}),(0,P.jsxs)(u.Z,{maxWidth:400,my:".5em",lineHeight:"25px",component:"p",variant:"p",color:"GrayText",children:[e.description.slice(0,150),"..."]}),(0,P.jsx)(x.Z,{variant:"filled",label:e.tags})]})]},e._id)}))}))})]})]})]})}):(0,P.jsx)(a.Z,{mt:"5em",children:(0,P.jsx)(A.Z,{})})]})]})}},9029:function(e,t,n){n.d(t,{Bj:function(){return i},VR:function(){return r},f8:function(){return o},x$:function(){return s}});var r=function(e){return e.actions.isLoading},o=function(e){return e.actions.error},i=function(e){return e.actions.snackBarMessage},s=function(e){return e.actions.isSnackBarOpen}},8431:function(e,t,n){n.d(t,{GA:function(){return o},Go:function(){return a},S1:function(){return i},pX:function(){return s}});var r=n(5627).ACTION_ACTION_TYPES,o=function(){return{type:r.SET_IS_LOADING}},i=function(e){return{type:r.SET_SNACKBAR_OPEN,payload:e}},s=function(e){return{type:r.SET_SNACKBAR_MESSAGE,payload:e}},a=function(e){return{type:r.SET_ERROR,payload:e}}},1006:function(){}}]);
//# sourceMappingURL=38.f1c2fc76.chunk.js.map