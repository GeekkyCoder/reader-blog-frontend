"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[220],{1939:function(e,t,n){var i=n(6314),r=n(3239),s=n(184);t.Z=function(){return(0,s.jsx)(i.Z,{sx:{color:"grey.600"},spacing:2,direction:"row",justifyContent:"center",children:(0,s.jsx)(r.Z,{color:"inherit"})})}},8594:function(e,t,n){n.d(t,{UP:function(){return c},Yb:function(){return o},mI:function(){return a}});var i=n(6934),r=n(4554),s=n(3392),o=(0,i.ZP)(r.Z)((function(e){return{}})),c=(0,i.ZP)(s.Z)((function(e){return{}})),a=(0,i.ZP)(r.Z)((function(e){return{}}))},5220:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var i=n(4165),r=n(5861),s=n(9439),o=n(2791),c=n(4554),a=n(6314),l=n(890),u=n(68),d=n(3044),p=n(1918),h=n(6151),m=n(4721),f=n(9164),x=n(3543),v=n(4070),Z=n(6517),j=n(1939),g=(n(1006),n(9201)),y=n(184),w=(0,g.Z)((0,y.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),S=(0,g.Z)((0,y.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined"),z=(0,g.Z)((0,y.jsx)("path",{d:"M15.08 9.59 12 12.67 8.92 9.59 7.5 11l4.5 4.5 4.5-4.5-1.42-1.41zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ExpandCircleDownOutlined"),k=(0,g.Z)((0,y.jsx)("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutline"),b=(0,g.Z)((0,y.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),C=(0,g.Z)((0,y.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4h-3.5z"}),"DeleteOutlineOutlined"),M=n(5289),I=n(5661),P=n(9157),O=n(8594),E=n(9709),T=n(148),L=n(1243),H=function(e){var t=e.postId,n=e.isEditModalOpen,l=e.setIsEditModalOpen,u=e.handleCancelClick,d=(0,o.useState)(""),p=(0,s.Z)(d,2),f=p[0],Z=p[1],g=(0,o.useState)(""),w=(0,s.Z)(g,2),S=w[0],z=w[1],k=(0,o.useState)(!1),b=(0,s.Z)(k,2),C=b[0],H=b[1],D=(0,o.useState)(!1),V=(0,s.Z)(D,2),U=V[0],W=V[1],_=(0,o.useState)(!1),F=(0,s.Z)(_,2),G=F[0],q=F[1],A=(0,o.useState)(""),B=(0,s.Z)(A,2),Y=B[0],N=B[1],R=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("clicked"),r={title:f,description:S},e.prev=3,H(!0),e.next=7,L.Z.patch("/api/v1/posts/updatePost?postId=".concat(t),r);case 7:s=e.sent,s.data,q(!0),N("post updated successfully \u2714"),H(!1),W(!1),setTimeout((function(){l(!1),window.location.reload()}),3e3),setTimeout((function(){q(!1)}),5e3),e.next=25;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0),W(!0),N("post update failed \u274c"),H(!1),q(!0),setTimeout((function(){q(!1),W(!1)}),5e3);case 25:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var n,r,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.prev=1,e.next=4,L.Z.get("/api/v1/posts/currentUserPost?postId=".concat(t));case 4:s=e.sent,o=s.data,Z(null===o||void 0===o||null===(n=o.userPost)||void 0===n?void 0:n.title),z(null===o||void 0===o||null===(r=o.userPost)||void 0===r?void 0:r.description),N(""),q(!0),H(!1),W(!1),setTimeout((function(){q(!1)}),5e3),e.next=22;break;case 15:e.prev=15,e.t0=e.catch(1),N("something went wrong \u274c"),W(!0),H(!1),q(!0),setTimeout((function(){q(!1),W(!1)}),5e3);case 22:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,y.jsxs)(c.Z,{children:[C&&(0,y.jsx)(j.Z,{}),(0,y.jsx)(x.Z,{open:G,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,y.jsx)(v.Z,{severity:U?"error":"success",children:Y})}),(0,y.jsxs)(M.Z,{sx:{fontFamily:"cursive"},open:n,fullWidth:!0,maxWidth:"md",children:[(0,y.jsx)(I.Z,{children:"Edit Your Post"}),(0,y.jsx)(m.Z,{}),(0,y.jsx)(P.Z,{children:(0,y.jsxs)(c.Z,{component:"form",onSubmit:R,children:[(0,y.jsx)(c.Z,{children:(0,y.jsx)(O.UP,{required:!0,sx:{width:"100%",fontFamily:"fantasy"},variant:"outlined",size:"medium",name:"title",onChange:function(e){return Z(e.target.value)},value:f})}),(0,y.jsx)(c.Z,{my:"2em",children:(0,y.jsx)(O.UP,{required:!0,sx:{width:"100%"},variant:"outlined",size:"medium",onChange:function(e){return z(e.target.value)},value:S,name:"description",multiline:!0})}),(0,y.jsxs)(a.Z,{direction:"row",spacing:2,children:[(0,y.jsx)(E.Z,{loading:C,type:"submit",variant:"contained",color:"success",startIcon:(0,y.jsx)(T.Z,{}),children:"Submit"}),(0,y.jsx)(h.Z,{onClick:u,variant:"contained",color:"error",children:"Cancel"})]})]})})]})]})},D=function(e){var t=e.userPost,n=e.error,g=e.isSnackBarOpen,M=(0,o.useState)(!1),I=(0,s.Z)(M,2),P=I[0],O=I[1],E=(0,o.useState)(!1),T=(0,s.Z)(E,2),D=T[0],V=T[1],U=(0,o.useState)(!1),W=(0,s.Z)(U,2),_=W[0],F=W[1],G=(0,o.useState)(!1),q=(0,s.Z)(G,2),A=q[0],B=q[1],Y=function(){O(!0)},N=function(){O(!1)},R=function(){V(!0)},J=function(){V(!1)},K=function(e){F((function(e){return!e}))},Q=(0,o.useCallback)((function(){return P?(0,y.jsx)(w,{fontSize:"small"}):(0,y.jsx)(S,{fontSize:"small"})}),[P]),X=(0,o.useCallback)((function(){return D?(0,y.jsx)(b,{fontSize:"small"}):(0,y.jsx)(C,{fontSize:"small"})}),[D]),$="".concat(_?"fade-description-user-home":"fade-description-user-show-home-unset"),ee=function(){B(!0)},te=function(){B(!1)},ne=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("are you are you want to delete your post ?")){e.next=11;break}return e.prev=2,e.next=5,L.Z.delete("/api/v1/posts/deletePost?post=".concat(t));case 5:setTimeout((function(){window.location.reload()}),3e3),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),ie=(0,o.useMemo)((function(){return(0,y.jsxs)(c.Z,{children:[A&&(0,y.jsx)(H,{isEditModalOpen:A,handleCancelClick:te,postId:t._id,setIsEditModalOpen:B}),(0,y.jsx)(a.Z,{direction:"column",alignItems:"center",display:"flex",mt:"3em",children:(0,y.jsxs)(c.Z,{width:{xs:"100%",sm:"70%"},children:[(0,y.jsx)(l.Z,{variant:"h2",component:"h3",fontWeight:{xs:800,sm:800},fontSize:{xs:"1.5rem",sm:"3rem"},children:t.title}),(0,y.jsxs)(c.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",my:"2em",position:"relative",children:[(0,y.jsxs)(c.Z,{display:"flex",alignItems:"center",children:[(0,y.jsx)(u.Z,{title:"".concat(t.name),children:(0,y.jsx)(d.Z,{sx:{alignSelf:"flex-start",width:56,height:56},src:null===t||void 0===t?void 0:t.profileImage,alt:null===t||void 0===t?void 0:t.profileImage})}),(0,y.jsxs)(c.Z,{ml:".5em",mb:{xs:"1em",sm:"0em"},children:[(0,y.jsx)(l.Z,{component:"p",variant:"p",children:null===t||void 0===t?void 0:t.name}),t.bio&&(0,y.jsx)(l.Z,{variant:"p",component:"p",my:".5em",color:"GrayText",children:t.bio}),(0,y.jsxs)(l.Z,{component:"p",variant:"p",color:"GrayText",children:["Published on",(0,y.jsx)(l.Z,{ml:".5em",component:"span",variant:"span",children:(0,Z.p)(null===t||void 0===t?void 0:t.createdAt)}),(0,y.jsx)(c.Z,{my:"1em",children:(0,y.jsx)(p.Z,{variant:"filled",label:null===t||void 0===t?void 0:t.tags,size:"large"})})]})]})]}),(0,y.jsxs)(c.Z,{alignSelf:"flex-start",children:[(0,y.jsx)(u.Z,{title:"edit this post",children:(0,y.jsx)(h.Z,{sx:{mx:"1em"},color:"inherit",variant:"contained",endIcon:Q(),onMouseEnter:Y,onMouseLeave:N,onClick:ee,children:"Edit"})}),(0,y.jsx)(u.Z,{title:"delete this post",children:(0,y.jsx)(h.Z,{sx:{my:{xs:"1em",sm:"0em"}},color:"inherit",variant:"contained",endIcon:X(),onMouseEnter:R,onMouseLeave:J,onClick:function(){return ne(t._id)},children:"Delete"})})]}),(0,y.jsxs)(l.Z,{color:"GrayText",position:"absolute",bottom:{xs:"-1.5rem",sm:"-1rem"},right:"0",component:"p",variant:"p",children:["last updated: ",(0,Z.p)(t.updatedAt)]})]}),(0,y.jsx)(m.Z,{}),(0,y.jsx)("img",{style:{margin:"1em 0"},width:"100%",src:null===t||void 0===t?void 0:t.image,alt:"blog-".concat(null===t||void 0===t?void 0:t._id)}),(0,y.jsx)(l.Z,{className:"fade-description ".concat($," "),variant:"p",lineHeight:"30px",my:"1em",fontWeight:400,component:"p",children:null===t||void 0===t?void 0:t.description}),(0,y.jsx)(u.Z,{title:"show more content",children:(0,y.jsxs)(h.Z,{onClick:K,endIcon:_?(0,y.jsx)(z,{fontSize:"small"}):(0,y.jsx)(k,{fontSize:"small"}),variant:"text",color:"inherit",sx:{fontWeight:800,marginLeft:"auto",display:"flex",width:200,justifyContent:"felx-end",alignItems:"center"},children:["Show ",_?"more":"less"]})})]})},t._id)]})}),[t,P,D,_,A]);return(0,y.jsxs)(f.Z,{children:[n&&(0,y.jsx)(x.Z,{open:g,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,y.jsx)(v.Z,{severity:n?"error":"success",children:n?"fetching failed":"user blog posts fetched successfully"})}),Object.keys(t).length>0?(0,y.jsx)(c.Z,{children:ie}):(0,y.jsx)(c.Z,{mt:"5em",children:(0,y.jsx)(j.Z,{})})]})},V=function(){var e=(0,o.useState)([]),t=(0,s.Z)(e,2),n=t[0],c=t[1],a=(0,o.useState)(!1),l=(0,s.Z)(a,2),u=l[0],d=l[1],p=(0,o.useState)(!1),h=(0,s.Z)(p,2),m=h[0],f=h[1],x=(0,o.useState)(!1),v=(0,s.Z)(x,2),Z=v[0],j=v[1];return(0,o.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,L.Z.get("/api/v1/posts/user/posts");case 4:t=e.sent,n=t.data,c(null===n||void 0===n?void 0:n.posts),d(!1),j(!1),f(!0),setTimeout((function(){f(!1)}),3e3),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(1),j(!0),d(!1),f(!0),setTimeout((function(){f(!1)}),3e3);case 19:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,y.jsx)(y.Fragment,{children:n&&n.map((function(e){return(0,y.jsx)(D,{userPost:e,error:Z,isLoading:u,isSnackBarOpen:m},e._id)}))})}},6517:function(e,t,n){n.d(t,{p:function(){return i}});var i=function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}},148:function(e,t,n){var i=n(9201),r=n(184);t.Z=(0,i.Z)((0,r.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},1006:function(){}}]);
//# sourceMappingURL=220.7eed9eb7.chunk.js.map