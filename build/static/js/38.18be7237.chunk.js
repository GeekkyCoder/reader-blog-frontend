"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[38],{1939:function(e,t,n){var r=n(6314),o=n(3239),i=n(184);t.Z=function(){return(0,i.jsx)(r.Z,{sx:{color:"grey.600"},spacing:2,direction:"row",justifyContent:"center",children:(0,i.jsx)(o.Z,{color:"inherit"})})}},3038:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var r=n(1413),o=n(4165),i=n(5861),s=n(9439),a=n(4554),c=n(9164),l=n(3543),d=n(4070),p=n(6314),u=n(890),m=n(68),h=n(3044),x=n(1918),f=n(4721),v=n(6151),Z=n(7621),g=n(2169),j=n(9504),y=n(2791),b=n(9434),w=n(5717),S=n(7689),k=(n(1006),n(1243)),I=n(6517),T=n(2888),C=n(6144),A=n(4801),O=n(9313),G=n(1939),W=n(2554),_=n(6934),E=n(4708),M=n(5519),P=n(1748),z=n(184),R=function(e){var t=e.comment;return(0,z.jsx)(a.Z,{my:"1em",children:(0,z.jsxs)(a.Z,{display:"flex",alignItems:"center",children:[(0,z.jsx)(h.Z,{sx:{alignSelf:"flex-start"},src:t.profileImage,alt:t.name}),(0,z.jsxs)(a.Z,{mx:"1em",children:[(0,z.jsx)(u.Z,{variant:"p",component:"p",fontWeight:800,children:t.name}),(0,z.jsx)(u.Z,{variant:"p",component:"p",fontSize:"14px",color:"GrayText",children:t.bio}),(0,z.jsx)(u.Z,{variant:"p",component:"p",color:"GrayText",children:(0,I.p)(t.createdAt)}),(0,z.jsx)(a.Z,{my:"1em",children:(0,z.jsx)(u.Z,{variant:"p",component:"p",fontWeight:800,children:t.content})})]})]})})},B=n(3392),N=n(9709),D=n(169),F=n(148),H=n(8431),L=n(9029),U=(0,_.ZP)("div")((function(e){var t=e.theme;return{height:"100%",backgroundColor:"light"===t.palette.mode?M.Z[100]:t.palette.background.default}}));var X=function(e){var t=e.isCommentModalOpen,n=e.setIsCommentModalOpen,r=e.blogId,m=(0,y.useState)(""),h=(0,s.Z)(m,2),x=h[0],f=h[1],Z=(0,y.useState)([]),g=(0,s.Z)(Z,2),j=g[0],w=g[1],S=(0,b.I0)(),I=(0,b.v9)(L.VR),T=((0,b.v9)(L.Bj),(0,b.v9)(L.x$)),C=(0,b.v9)(L.f8),A=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){var n,i,s,a,c,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={content:x},e.prev=2,S((0,H.GA)()),e.next=6,k.Z.post("https://reader-blogging-web.onrender.com/api/v1/comments/createComment?postId=".concat(r," "),n,{withCredentials:!0});case 6:i=e.sent,i.data,S((0,H.pX)("comment posted")),S((0,H.S1)(!0)),setTimeout((function(){S((0,H.S1)(!1))}),5e3),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(2),S((0,H.Go)((null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.msg)||"failed to comment")),S((0,H.S1)(!0)),S((0,H.pX)((null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.msg)||"failed to comment")),setTimeout((function(){S((0,H.S1)(!1))}),5e3);case 19:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,y.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S((0,H.GA)()),e.prev=1,e.next=4,k.Z.get("/api/v1/comments/allComments?post=".concat(r));case 4:t=e.sent,n=t.data,w(null===n||void 0===n?void 0:n.comments[0].comments),S((0,H.S1)(!0)),setTimeout((function(){S((0,H.S1)(!1))}),5e3),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),S((0,H.Go)(!0)),S((0,H.S1)(!0)),setTimeout((function(){S((0,H.S1)(!1))}),5e3);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,z.jsxs)(a.Z,{children:[(0,z.jsx)(l.Z,{open:T,anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,z.jsx)(d.Z,{severity:C?"error":"success",children:C})}),(0,z.jsxs)(U,{children:[(0,z.jsx)(E.ZP,{}),(0,z.jsx)(W.xB,{styles:{".MuiDrawer-root > .MuiPaper-root":{height:"calc(50% - ".concat(56,"px)"),overflow:"scroll"}}}),(0,z.jsx)(P.Z,{anchor:"bottom",open:t,swipeAreaWidth:56,disableSwipeToOpen:!1,ModalProps:{keepMounted:!0},children:(0,z.jsxs)(c.Z,{children:[(0,z.jsxs)(a.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,z.jsxs)(u.Z,{fontSize:"2rem",variant:"p",component:"p",fontWeight:800,color:"GrayText",children:["Responses: ",j.length]}),(0,z.jsx)(v.Z,{onClick:function(){return n(!1)},variant:"contained",color:"inherit",startIcon:(0,z.jsx)(D.Z,{fontSize:"large"})})]}),(0,z.jsxs)(p.Z,{children:[(0,z.jsxs)(a.Z,{component:"form",my:"1em",onSubmit:A,children:[(0,z.jsx)(B.Z,{sx:{width:"60%"},variant:"outlined",multiline:!0,placeholder:"write a comment ? \u270d",label:"comment",onChange:function(e){f(e.target.value)},name:"content"}),(0,z.jsx)(a.Z,{my:"1em",children:(0,z.jsx)(N.Z,{loading:I,type:"submit",variant:"text",color:"inherit",startIcon:(0,z.jsx)(F.Z,{fontSize:"medium"}),children:"Post"})})]}),j.length>0?j.map((function(e){return(0,z.jsx)(R,{comment:e},e.id)})):(0,z.jsx)(u.Z,{my:"2em",variant:"p",component:"p",fontSize:"1.5rem",fontWeight:"bold",children:"No Comments On This Post Yet"})]})]})})]})]})},K={infinite:!0,autoplay:!0,speed:1e3,slidesToShow:2,slidesToScroll:1,swipeToSlide:!0,arrows:!1,dots:!1,pauseOnHover:!0,responsive:[{breakpoint:1200,settings:{arrows:!1,slidesToShow:2}},{breakpoint:768,settings:{arrows:!1,slidesToShow:1}},{breakpoint:480,settings:{arrows:!1,slidesToShow:1}}]},V=function(){var e,t=(0,y.useState)({}),n=(0,s.Z)(t,2),b=n[0],W=n[1],_=(0,y.useState)([]),E=(0,s.Z)(_,2),M=E[0],P=E[1],R=(0,y.useState)({}),B=(0,s.Z)(R,2),N=B[0],D=B[1],F=(0,y.useState)(!1),H=(0,s.Z)(F,2),L=H[0],U=H[1],V=(0,y.useState)(!1),Y=(0,s.Z)(V,2),$=Y[0],q=Y[1],J=(0,y.useState)(!1),Q=(0,s.Z)(J,2),ee=Q[0],te=Q[1],ne=(0,y.useState)(!1),re=(0,s.Z)(ne,2),oe=re[0],ie=re[1],se=(0,S.UO)().blogId;(0,y.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.Z.get("https://reader-blogging-web.onrender.com/api/v1/posts/blogs?post=".concat(se),{withCredentials:!0});case 3:t=e.sent,n=t.data,W(null===n||void 0===n?void 0:n.post),q(!0),setTimeout((function(){q(!1)}),3e3),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),q(!0),setTimeout((function(){q(!1)}),3e3),U(!0);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[N]);var ae=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.prev=1,e.next=4,k.Z.patch("https://reader-blogging-web.onrender.com/api/v1/posts/likepost?post=".concat(se),{withCredentials:!0});case 4:t=e.sent,n=t.data,D(null===n||void 0===n?void 0:n.post),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!1),e.prev=1,e.next=4,k.Z.patch("https://reader-blogging-web.onrender.com/api/v1/posts/unlikepost?post=".concat(se),{withCredentials:!0});case 4:t=e.sent,n=t.data,D(null===n||void 0===n?void 0:n.post),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();(0,y.useEffect)((function(){if(b){var e=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.Z.get("https://reader-blogging-web.onrender.com/api/v1/posts/getMoreUserPosts?postId=".concat(se,"&userId=").concat(null===b||void 0===b?void 0:b.createdBy),{withCredentials:!0});case 3:t=e.sent,n=t.data,P(n.filteredPosts),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}}),[b]);return(0,z.jsxs)(a.Z,{children:[Object.keys(b).length>0&&(0,z.jsx)(X,{blogId:null===b||void 0===b?void 0:b._id,isCommentModalOpen:oe,setIsCommentModalOpen:ie}),(0,z.jsxs)(c.Z,{children:[L&&(0,z.jsx)(l.Z,{open:$,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,z.jsx)(d.Z,{severity:"error",children:"could not fetch blog"})}),Object.keys(b).length>0?(0,z.jsx)(p.Z,{direction:"column",alignItems:"center",display:"flex",mt:"3em",children:(0,z.jsxs)(a.Z,{width:{xs:"100%",sm:"70%"},children:[(0,z.jsx)(u.Z,{variant:"h2",component:"h3",fontWeight:{xs:800,sm:800},fontSize:{xs:"1.5rem",sm:"3rem"},children:b.title}),(0,z.jsxs)(a.Z,{display:"flex",alignItems:"center",my:"2em",position:"relative",children:[(0,z.jsx)(m.Z,{title:"".concat(b.name),children:(0,z.jsx)(h.Z,{sx:{alignSelf:"flex-start",width:56,height:56},src:null===b||void 0===b?void 0:b.profileImage,alt:null===b||void 0===b?void 0:b.profileImage})}),(0,z.jsxs)(a.Z,{ml:".5em",mb:{xs:"1em",sm:"0em"},children:[(0,z.jsx)(u.Z,{component:"p",variant:"p",children:null===b||void 0===b?void 0:b.name}),b.bio&&(0,z.jsx)(u.Z,{variant:"p",component:"p",my:".5em",color:"GrayText",children:b.bio}),(0,z.jsxs)(u.Z,{component:"p",variant:"p",color:"GrayText",children:["Published on",(0,z.jsx)(u.Z,{ml:".5em",component:"span",variant:"span",children:(0,I.p)(null===b||void 0===b?void 0:b.createdAt)}),(0,z.jsx)(a.Z,{my:"1em",children:(0,z.jsx)(x.Z,{variant:"filled",label:null===b||void 0===b?void 0:b.tags,size:"large"})})]})]}),(0,z.jsxs)(u.Z,{color:"GrayText",position:"absolute",bottom:{xs:"-1.5rem",sm:"-1rem"},right:"0",component:"p",variant:"p",children:["last updated: ",(0,I.p)(b.updatedAt)]})]}),(0,z.jsx)(f.Z,{}),(0,z.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",my:"1em",children:[(0,z.jsxs)(p.Z,{direction:"row",children:[(0,z.jsx)(m.Z,{title:"like this blog post",children:(0,z.jsx)(v.Z,{startIcon:ee?(0,z.jsx)(C.Z,{onClick:ce}):(0,z.jsx)(T.Z,{onClick:ae}),variant:"text",color:"inherit",children:null===b||void 0===b?void 0:b.likes})}),(0,z.jsx)(m.Z,{title:"comments",children:(0,z.jsx)(v.Z,{startIcon:(0,z.jsx)(A.Z,{}),onClick:function(){return b._id,void ie(!0)},variant:"text",color:"inherit",children:null===b||void 0===b||null===(e=b.comments)||void 0===e?void 0:e.length})})]}),(0,z.jsx)(m.Z,{title:"save this blog post",children:(0,z.jsx)(v.Z,{startIcon:(0,z.jsx)(O.Z,{fontSize:"large"}),variant:"text",color:"inherit"})})]}),(0,z.jsx)(f.Z,{}),(0,z.jsx)("img",{style:{margin:"1em 0"},width:"100%",src:null===b||void 0===b?void 0:b.image,alt:"blog-".concat(null===b||void 0===b?void 0:b._id)}),(0,z.jsx)(u.Z,{variant:"p",lineHeight:"30px",my:"1em",fontWeight:400,component:"p",children:null===b||void 0===b?void 0:b.description}),(0,z.jsxs)(a.Z,{bgcolor:"#FAFAFA",p:"1em",children:[(0,z.jsx)(a.Z,{display:"flex",alignItems:{xs:"center",sm:"flex-start"},justifyContent:{xs:"center",sm:"flex-start"},children:(0,z.jsxs)(a.Z,{flex:{xs:1,sm:2},py:"1em",children:[(0,z.jsx)("img",{style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"50%"},src:b.profileImage,alt:b.name}),(0,z.jsxs)(u.Z,{component:"h3",variant:"p",lineHeight:"30px",fontWeight:800,children:["Written by ",b.name]}),(0,z.jsx)(u.Z,{component:"h3",variant:"p",lineHeight:"30px",fontWeight:400,color:"GrayText",children:b.bio})]})}),(0,z.jsx)(f.Z,{}),M.length>0&&(0,z.jsxs)(a.Z,{my:"2em",children:[(0,z.jsxs)(u.Z,{py:"2em",component:"p",variant:"p",fontWeight:600,children:["More From ",b.name," \ud83d\udc47"]}),(0,z.jsx)(a.Z,{children:(0,z.jsx)(w.Z,(0,r.Z)((0,r.Z)({},K),{},{className:"slider-styles",children:M.map((function(e){return(0,z.jsxs)(Z.Z,{maxWidth:250,sx:{height:"450px"},children:[(0,z.jsx)(g.Z,{component:"img",alt:e.title,height:"140",image:e.image}),(0,z.jsxs)(j.Z,{children:[(0,z.jsxs)(a.Z,{display:"flex",alignItems:"center",children:[(0,z.jsx)(h.Z,{src:e.profileImage,alt:e.name}),(0,z.jsx)(u.Z,{ml:".5em",component:"p",variant:"p",fontWeight:200,children:e.name})]}),(0,z.jsx)(u.Z,{maxWidth:300,my:".5em",component:"h3",variant:"p",fontWeight:800,children:e.title}),(0,z.jsxs)(u.Z,{maxWidth:400,my:".5em",lineHeight:"25px",component:"p",variant:"p",color:"GrayText",children:[e.description.slice(0,150),"..."]}),(0,z.jsx)(x.Z,{variant:"filled",label:e.tags})]})]},e._id)}))}))})]})]})]})}):(0,z.jsx)(a.Z,{mt:"5em",children:(0,z.jsx)(G.Z,{})})]})]})}},9029:function(e,t,n){n.d(t,{Bj:function(){return i},VR:function(){return r},f8:function(){return o},x$:function(){return s}});var r=function(e){return e.actions.isLoading},o=function(e){return e.actions.error},i=function(e){return e.actions.snackBarMessage},s=function(e){return e.actions.isSnackBarOpen}},8431:function(e,t,n){n.d(t,{GA:function(){return o},Go:function(){return a},S1:function(){return i},pX:function(){return s}});var r=n(5627).ACTION_ACTION_TYPES,o=function(){return{type:r.SET_IS_LOADING}},i=function(e){return{type:r.SET_SNACKBAR_OPEN,payload:e}},s=function(e){return{type:r.SET_SNACKBAR_MESSAGE,payload:e}},a=function(e){return{type:r.SET_ERROR,payload:e}}},6517:function(e,t,n){n.d(t,{p:function(){return r}});var r=function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}},1006:function(){}}]);
//# sourceMappingURL=38.18be7237.chunk.js.map