(self.webpackChunkclient=self.webpackChunkclient||[]).push([[567],{7567:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return re}});var r=t(4165),i=t(5861),o=t(3543),s=t(4070),l=t(6314),a=t(4554),c=t(890),u=t(1413),d=t(9439),p=t(9164),f=t(3044),m=t(1918),x=t(68),h=t(3400),v=t(4721),g=t(5699),Z=t(3392),j=t(3896),S=t(1243),b=(t(1006),t(2791)),w=t(9434),y=t(6801),C=t(9497),_=t(4942),T=t(5289),E=t(5661),O=t(9157),I=t(7123),F=t(6151),G=t(8594),A=t(9709),L=t(5683),k=t(7893),B=t(9574),D=t(8431),N=t(9029),P=t(184),z=["public","private","followers"],M=["technology","science","politics","history","health and fitness","coding","general"],R=function(e){var n=e.setFetchNewOnCreate,t=(0,b.useState)(!1),p=(0,d.Z)(t,2),f=p[0],m=p[1],h=(0,b.useState)({title:"",description:"",image:"",tags:"",view:""}),j=(0,d.Z)(h,2),R=j[0],H=j[1],W=(0,w.I0)(),U=(0,w.v9)(y.isModalOpenSelector),X=(0,w.v9)(N.VR),V=(0,w.v9)(N.Bj),Y=(0,w.v9)(N.x$),$=(0,w.v9)(N.f8),q=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),R.title&&R.description){e.next=3;break}return e.abrupt("return");case 3:return i={title:R.title,description:R.description,image:R.image||"https://images.unsplash.com/photo-1542254503-d802f00c2342?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1032&q=80",tags:R.tags||"general",view:R.view||"public"},W((0,D.GA)()),e.prev=5,e.next=8,S.Z.post("https://reader-blogging-web.onrender.com/api/v1/posts/createPost",i,{withCredentials:!0});case 8:W((0,D.pX)("posted")),m(!1),W((0,D.S1)(!0)),n((function(e){return!e})),setTimeout((function(){W((0,D.S1)(!1))}),3e3),W((0,C.TOGGLE_ISMODALOPEN)(!1)),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(5),W((0,D.S1)(!0)),W((0,D.pX)("failed to post")),W((0,D.Go)((null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.msg)||"failed to post")),setTimeout((function(){W((0,D.S1)(!1))}),3e3);case 22:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(n){return e.apply(this,arguments)}}(),K=function(e){e.preventDefault();var n=e.target,t=n.name,r=n.value;"file"===n.type?(H((0,u.Z)((0,u.Z)({},R),{},(0,_.Z)({},t,e.target.files[0]))),m(!0)):H((0,u.Z)((0,u.Z)({},R),{},(0,_.Z)({},t,r)))},J=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i,o,s,l,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.image,(i=new FormData).append("file",t),i.append("upload_preset","lfueeeon"),W((0,D.GA)()),e.prev=5,e.next=8,S.Z.post("https://api.cloudinary.com/v1_1/dczhcauwf/image/upload",i);case 8:o=e.sent,s=o.data,H((0,u.Z)((0,u.Z)({},R),{},{image:s.secure_url})),W((0,D.S1)(!0)),W((0,D.pX)("image uploaded successfully!")),setTimeout((function(){W((0,D.S1)(!1))}),3e3),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(5),W((0,D.Go)((null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.msg)||"failed to upload image!")),W((0,D.S1)(!0)),W((0,D.pX)("failed tp upload image")),setTimeout((function(){W((0,D.S1)(!1))}),3e3);case 22:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(n){return e.apply(this,arguments)}}();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(o.Z,{message:V,open:Y,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,P.jsx)(s.Z,{variant:"filled",severity:$?"error":"success",children:V})}),(0,P.jsxs)(T.Z,{sx:{fontFamily:"cursive"},open:U,fullScreen:!0,fullWidth:!0,maxWidth:"lg",keepMounted:!0,children:[(0,P.jsx)(E.Z,{children:"Create A Blog"}),(0,P.jsx)(v.Z,{}),(0,P.jsx)(O.Z,{children:(0,P.jsxs)(G.Yb,{onSubmit:q,component:"form",sx:{display:"flex",flexDirection:"column"},children:[(0,P.jsxs)(l.Z,{direction:"row",justifyContent:"right",alignItems:"center",children:[(0,P.jsx)(g.Z,{inputValue:R.tags,fontFamily:"inherit",size:"medium",onInputChange:function(e,n){H((0,u.Z)((0,u.Z)({},R),{},{tags:n}))},name:"tags",options:M,sx:{width:200,mr:"2em"},renderInput:function(e){return(0,P.jsx)(Z.Z,(0,u.Z)((0,u.Z)({},e),{},{label:"general"}))}}),(0,P.jsx)(g.Z,{inputValue:R.view,fontFamily:"inherit",size:"medium",onInputChange:function(e,n){H((0,u.Z)((0,u.Z)({},R),{},{view:n}))},name:"view",options:z,sx:{width:200},renderInput:function(e){return(0,P.jsx)(Z.Z,(0,u.Z)((0,u.Z)({},e),{},{label:"public"}))}})]}),(0,P.jsx)(a.Z,{my:"2em",children:(0,P.jsx)(G.UP,{required:!0,placeholder:"What do you want to talk about?",label:"Title",sx:{width:"100%",fontFamily:"fantasy"},variant:"outlined",size:"medium",onChange:function(e){H((0,u.Z)((0,u.Z)({},R),{},{title:e.target.value}))},value:R.title})}),(0,P.jsx)(a.Z,{my:"2em",children:(0,P.jsx)(x.Z,{title:"description must not be less than 20 characters",placement:"top-start",children:(0,P.jsx)(G.UP,{required:!0,label:"Description",placeholder:"What's on your mind",sx:{width:"100%"},variant:"outlined",size:"medium",onChange:K,value:R.description,name:"description",multiline:!0})})}),(0,P.jsx)(a.Z,{children:(0,P.jsx)(c.Z,{component:"h4",variant:"'p",color:"GrayText",children:"Choose blog image:"})}),(0,P.jsxs)(a.Z,{my:"2em",sx:{display:"flex",alignItems:"center"},children:[(0,P.jsx)(x.Z,{placement:"top-start",title:"for better resolutions use a landscape image ",children:(0,P.jsx)(a.Z,{children:(0,P.jsx)(G.UP,{type:"file",variant:"outlined",size:"medium",onChange:K,name:"image"})})}),(0,P.jsx)(a.Z,{children:(0,P.jsx)(A.Z,{sx:{marginLeft:"2em"},variant:"contained",size:"large",color:"success",onClick:J,loading:X,disabled:!f,startIcon:(0,P.jsx)(L.Z,{}),children:"Upload"})})]}),(0,P.jsx)(v.Z,{}),(0,P.jsx)(I.Z,{children:(0,P.jsxs)(l.Z,{direction:"row",spacing:{xs:1,sm:2},children:[(0,P.jsx)(F.Z,{sx:{width:{xs:"100px",sm:"150px"}},variant:"text",size:"medium",color:"error",endIcon:(0,P.jsx)(k.Z,{}),onClick:function(){W((0,C.TOGGLE_ISMODALOPEN)(!1))},children:"Cancel"}),(0,P.jsx)(A.Z,{type:"submit",loading:X,variant:"text",color:"success",size:"medium",sx:{width:{xs:"100px",sm:"150px"}},endIcon:(0,P.jsx)(B.Z,{}),children:"Publish"})]})})]})})]})]})},H=t(1939),W=t(9313),U=t(7689),X=t(6517),V=t(3449),Y=t(9502),$=t(2851);function q(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e}var K=["technology","science","politics","history","health and fitness","coding","general"],J=["oldest","newest"],Q=function(){var e=(0,b.useState)(""),n=(0,d.Z)(e,2),t=n[0],o=n[1],s=(0,b.useState)(""),_=(0,d.Z)(s,2),T=_[0],E=_[1],O=(0,b.useState)("1"),I=(0,d.Z)(O,2),F=I[0],A=I[1],L=(0,b.useState)(!1),k=(0,d.Z)(L,2),B=k[0],D=k[1],N=(0,w.I0)(),z=(0,U.s0)(),M=(0,w.v9)(y.blogsSelector),Q=(0,w.v9)(y.loadingSelector);(0,b.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,i,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N((0,C.FETCH_BLOGS_START)()),e.prev=1,e.next=4,S.Z.get("https://reader-blogging-web.onrender.com/api/v1/posts/allPosts?tags=".concat(t,"&sort=").concat(T),{withCredentials:!0});case 4:n=e.sent,i=n.data,o=q((null===i||void 0===i?void 0:i.blogs)||[]),N((0,C.FETCH_BLOGS_SUCCESS)(o)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),N((0,C.FETCH_BLOGS_FAILED)(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.msg));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,t,i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N((0,C.FETCH_BLOGS_START)()),e.prev=1,e.next=4,S.Z.get("https://reader-blogging-web.onrender.com/api/v1/posts/followerposts",{withCredentials:!0});case 4:n=e.sent,t=n.data,i=q((null===t||void 0===t?void 0:t.posts)||[]),N((0,C.FETCH_BLOGS_SUCCESS)(i)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),N((0,C.FETCH_BLOGS_FAILED)(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.msg));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();"1"===F&&e(),"2"===F&&n()}),[t,T,B,F]);var ee=function(){return(0,P.jsx)(P.Fragment,{children:Q?(0,P.jsx)(H.Z,{}):(0,P.jsx)(a.Z,{children:M&&M.map((function(e){return(0,P.jsx)(p.Z,{sx:{cursor:"pointer"},onClick:function(){return n=e._id,void z("/content/blog/".concat(n));var n},children:(0,P.jsxs)(l.Z,{direction:"column",py:"2em",px:".5em",pb:"1em",children:[(0,P.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",mb:{xs:"1em",sm:"0em"}},children:[(0,P.jsx)(f.Z,{src:e.profileImage,alt:e.name}),(0,P.jsx)(c.Z,{ml:{xs:".5em",sm:"1em"},component:"h3",variant:"p",fontWeight:600,children:e.name})]}),(0,P.jsxs)(l.Z,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"start",sm:"center"},display:"flex",children:[(0,P.jsxs)(a.Z,{flex:5,order:{xs:2,sm:1},children:[(0,P.jsx)(c.Z,{component:"h2",my:{xs:"1em",sm:".5em"},variant:"p",fontWeight:800,children:e.title}),(0,P.jsx)(c.Z,{mr:".5em",className:"fade-description fade-description-lines",component:"p",children:e.description}),(0,P.jsxs)(l.Z,{my:"1em",direction:"row",alignItems:"center",display:"flex",justifyContent:"space-between",children:[(0,P.jsx)(m.Z,{variant:"filled",label:e.tags,size:"large"}),(0,P.jsxs)(a.Z,{alignSelf:"flex-end",display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,P.jsx)(c.Z,{display:{xs:"none",sm:"block"},color:"GrayText",fontSize:"15px",children:(0,X.p)(e.createdAt)}),(0,P.jsx)(x.Z,{title:"save",sx:{ml:"1em",mr:"1em"},children:(0,P.jsx)(h.Z,{children:(0,P.jsx)(W.Z,{})})})]})]})]}),(0,P.jsx)(a.Z,{flex:2,order:{xs:1,sm:2},children:(0,P.jsx)("img",{className:"blog-image",style:{objectFit:"cover"},src:e.image,alt:e.title})})]}),(0,P.jsx)(v.Z,{})]})},e._id)}))})})};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(R,{setFetchNewOnCreate:D}),(0,P.jsxs)(G.mI,{p:{xs:"0em",sm:"2em"},children:[(0,P.jsx)(G.Yb,{sx:{my:"2em",px:{xs:"1em",sm:"2em"}},component:"form",children:(0,P.jsxs)(l.Z,{direction:{xs:"column",sm:"row"},justifyContent:"right",alignItems:"center",children:[(0,P.jsx)(g.Z,{value:t,fontFamily:"inherit",size:"medium",onChange:function(e,n){o(n)},name:"tags",options:K,sx:{width:200,mr:{xs:"0em",sm:"2em"},mb:{xs:"1em",sm:"0em"}},renderInput:function(e){return(0,P.jsx)(Z.Z,(0,u.Z)((0,u.Z)({},e),{},{label:"catogories"}))}}),(0,P.jsx)(g.Z,{value:T,fontFamily:"inherit",size:"medium",onChange:function(e,n){E(n)},name:"filter",options:J,sx:{width:200},renderInput:function(e){return(0,P.jsx)(Z.Z,(0,u.Z)((0,u.Z)({},e),{},{label:"sort by"}))}})]})}),(0,P.jsxs)(a.Z,{my:"2em",children:[(0,P.jsxs)(V.ZP,{value:F,children:[(0,P.jsx)(a.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,P.jsxs)(Y.Z,{onChange:function(e,n){A(n)},"aria-label":"tabs",children:[(0,P.jsx)(j.Z,{label:"All",value:"1"}),(0,P.jsx)(j.Z,{label:"Followings",value:"2"})]})}),(0,P.jsx)($.Z,{value:"1",children:ee()}),(0,P.jsx)($.Z,{value:"2",children:ee()})]}),!Q&&0===(null===M||void 0===M?void 0:M.length)&&(0,P.jsx)(c.Z,{my:"1em",variant:"h3",component:"p",fontWeight:800,textAlign:"center",children:"No Blogs Found"})]})]})]})},ee=t(3612),ne=t(7412),te=function(e){var n=e.user,t=n.profileImage,r=n.name,i=n.bio,o=n._id,s=e.addToFollowing,l=(0,U.s0)();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(a.Z,{sx:{cursor:"pointer"},display:"flex",my:"2em",alignItems:"center",children:[(0,P.jsx)(x.Z,{title:r,children:(0,P.jsx)(f.Z,{onClick:function(){l("/profile/".concat(o))},sx:{width:24,height:24,alignSelf:"flex-start"},flex:1,src:t,alt:r})}),(0,P.jsxs)(a.Z,{ml:"1em",flex:1.5,children:[(0,P.jsx)(c.Z,{variant:"p",component:"h3",fontWeight:800,children:r}),(0,P.jsx)(c.Z,{lineHeight:"30px",color:"GrayText",component:"p",variant:"p",children:"".concat(i.slice(0,30),"...")||0})]}),(0,P.jsx)(x.Z,{title:"follow ".concat(r," to see their posts"),children:(0,P.jsx)(F.Z,{onClick:function(){return s(o)},flex:1,variant:"outlined",color:"inherit",children:"Follow"})})]}),(0,P.jsx)(v.Z,{})]})},re=function(){var e=(0,w.v9)(ee.$m),n=(0,w.I0)(),t=(0,w.v9)(N.f8),u=(0,w.v9)(N.Bj),d=(0,w.v9)(N.x$),p=(0,w.v9)(N.VR),f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n((0,D.GA)()),e.prev=1,e.next=4,S.Z.post("https://reader-blogging-web.onrender.com/api/v1/followers",{followerId:t},{withCredentials:!0});case 4:i=e.sent,o=i.data,n((0,ne.FETCH_USER_FOLLOWERS)(null===o||void 0===o?void 0:o.users)),n((0,D.pX)("you are now following ".concat(null===o||void 0===o?void 0:o.follower)||0)),n((0,D.S1)(!0)),setTimeout((function(){n((0,D.S1)(!1))}),4e3),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),n((0,D.Go)()),n((0,D.pX)((null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.msg)||"\u274c failed to follow")),n((0,D.S1)(!0)),setTimeout((function(){n((0,D.S1)(!1))}),4e3);case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(o.Z,{open:d,anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,P.jsx)(s.Z,{severity:t?"error":"success",children:u})}),(0,P.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",children:[(0,P.jsx)(a.Z,{flex:{xs:10,sm:5},children:(0,P.jsx)(Q,{})}),(0,P.jsx)(a.Z,{position:"relative",overflow:"hidden",height:"100vh",flex:2,display:{xs:"none",sm:"block"},bgcolor:"ghostwhite",children:(0,P.jsxs)(a.Z,{height:"100%",position:"absolute",top:"0px",bottom:"0px",right:"0px",p:"1em",overflow:"auto",className:"scrollbar-hidden",children:[e.length>0&&(0,P.jsx)(c.Z,{fontWeight:800,component:"p",variant:"p",fontSize:"1.6rem",children:"Who to Follow \ud83d\udc47"}),e&&e.map((function(e){return(0,P.jsx)(te,{user:e,addToFollowing:f,loadingAction:p},e._id)})),!e.length&&(0,P.jsx)(c.Z,{component:"p",fontWeight:800,variant:"p",children:"No one to follow for now"})]})})]})]})}},8594:function(e,n,t){"use strict";t.d(n,{UP:function(){return l},Yb:function(){return s},mI:function(){return a}});var r=t(6934),i=t(4554),o=t(3392),s=(0,r.ZP)(i.Z)((function(e){return{}})),l=(0,r.ZP)(o.Z)((function(e){return{}})),a=(0,r.ZP)(i.Z)((function(e){return{}}))},9029:function(e,n,t){"use strict";t.d(n,{Bj:function(){return o},VR:function(){return r},f8:function(){return i},x$:function(){return s}});var r=function(e){return e.actions.isLoading},i=function(e){return e.actions.error},o=function(e){return e.actions.snackBarMessage},s=function(e){return e.actions.isSnackBarOpen}},8431:function(e,n,t){"use strict";t.d(n,{GA:function(){return i},Go:function(){return l},S1:function(){return o},pX:function(){return s}});var r=t(5627).ACTION_ACTION_TYPES,i=function(){return{type:r.SET_IS_LOADING}},o=function(e){return{type:r.SET_SNACKBAR_OPEN,payload:e}},s=function(e){return{type:r.SET_SNACKBAR_MESSAGE,payload:e}},l=function(e){return{type:r.SET_ERROR,payload:e}}},9497:function(e,n,t){var r=t(5732);e.exports={FETCH_BLOGS_START:function(){return{type:r.SET_BLOGS_START}},FETCH_BLOGS_SUCCESS:function(e){return{type:r.SET_BLOGS_SUCCESS,payload:e}},FETCH_BLOGS_FAILED:function(e){return{type:r.SET_BLOGS_FAILED,payload:e}},TOGGLE_ISMODALOPEN:function(e){return{type:r.SET_ISMODALOPEN,payload:e}}}},6801:function(e){e.exports={blogsReducerSelector:function(e){return e.blogs},blogsSelector:function(e){return e.blogs.blogs},errorSelector:function(e){return e.blogs.error},loadingSelector:function(e){return e.blogs.isLoading},isModalOpenSelector:function(e){return e.blogs.isModalOpen}}},1006:function(){}}]);
//# sourceMappingURL=567.cf729bc9.chunk.js.map