(self.webpackChunkclient=self.webpackChunkclient||[]).push([[567],{7567:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return re}});var r=t(4165),i=t(5861),o=t(3543),s=t(4070),l=t(6314),a=t(4554),c=t(890),u=t(1413),d=t(9439),p=t(9164),f=t(3044),m=t(1918),x=t(68),h=t(3400),v=t(4721),g=t(5699),Z=t(3392),j=t(3896),S=t(1243),b=(t(1006),t(2791)),w=t(9434),y=t(6801),C=t(9497),_=t(4942),E=t(5289),T=t(5661),I=t(9157),O=t(7123),F=t(6151),G=t(8594),A=t(9709),L=t(5683),k=t(7893),B=t(9574),D=t(8431),R=t(9029),N=t(184),P=["public","private","followers"],z=["technology","science","politics","history","health and fitness","coding","general"],H=function(e){var n=e.setFetchNewOnCreate,t=(0,b.useState)(!1),p=(0,d.Z)(t,2),f=p[0],m=p[1],h=(0,b.useState)({title:"",description:"",image:"",tags:"",view:""}),j=(0,d.Z)(h,2),H=j[0],M=j[1],U=(0,w.I0)(),W=(0,w.v9)(y.isModalOpenSelector),X=(0,w.v9)(R.VR),V=(0,w.v9)(R.Bj),$=(0,w.v9)(R.x$),Y=(0,w.v9)(R.f8),q=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),H.title&&H.description){e.next=3;break}return e.abrupt("return");case 3:return i={title:H.title,description:H.description,image:H.image||"https://images.unsplash.com/photo-1542254503-d802f00c2342?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1032&q=80",tags:H.tags||"general",view:H.view||"public"},U((0,D.GA)()),e.prev=5,e.next=8,S.Z.post("https://reader-blogging-web.onrender.com/api/v1/posts/createPost",i,{withCredentials:!0});case 8:U((0,D.pX)("posted")),m(!1),U((0,D.S1)(!0)),n((function(e){return!e})),setTimeout((function(){U((0,D.S1)(!1))}),3e3),U((0,C.TOGGLE_ISMODALOPEN)(!1)),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(5),U((0,D.S1)(!0)),U((0,D.pX)("failed to post")),U((0,D.Go)((null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.msg)||"failed to post")),setTimeout((function(){U((0,D.S1)(!1))}),3e3);case 22:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(n){return e.apply(this,arguments)}}(),K=function(e){e.preventDefault();var n=e.target,t=n.name,r=n.value;"file"===n.type?(M((0,u.Z)((0,u.Z)({},H),{},(0,_.Z)({},t,e.target.files[0]))),m(!0)):M((0,u.Z)((0,u.Z)({},H),{},(0,_.Z)({},t,r)))},J=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i,o,s,l,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.image,(i=new FormData).append("file",t),i.append("upload_preset","lfueeeon"),U((0,D.GA)()),e.prev=5,e.next=8,S.Z.post("https://api.cloudinary.com/v1_1/dczhcauwf/image/upload",i);case 8:o=e.sent,s=o.data,M((0,u.Z)((0,u.Z)({},H),{},{image:s.secure_url})),U((0,D.S1)(!0)),U((0,D.pX)("image uploaded successfully!")),setTimeout((function(){U((0,D.S1)(!1))}),3e3),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(5),U((0,D.Go)((null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.msg)||"failed to upload image!")),U((0,D.S1)(!0)),U((0,D.pX)("failed tp upload image")),setTimeout((function(){U((0,D.S1)(!1))}),3e3);case 22:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(n){return e.apply(this,arguments)}}();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.Z,{message:V,open:$,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,N.jsx)(s.Z,{variant:"filled",severity:Y?"error":"success",children:V})}),(0,N.jsxs)(E.Z,{sx:{fontFamily:"cursive"},open:W,fullScreen:!0,fullWidth:!0,maxWidth:"lg",keepMounted:!0,children:[(0,N.jsx)(T.Z,{children:"Create A Blog"}),(0,N.jsx)(v.Z,{}),(0,N.jsx)(I.Z,{children:(0,N.jsxs)(G.Yb,{onSubmit:q,component:"form",sx:{display:"flex",flexDirection:"column"},children:[(0,N.jsxs)(l.Z,{direction:"row",justifyContent:"right",alignItems:"center",children:[(0,N.jsx)(g.Z,{inputValue:H.tags,fontFamily:"inherit",size:"medium",onInputChange:function(e,n){M((0,u.Z)((0,u.Z)({},H),{},{tags:n}))},name:"tags",options:z,sx:{width:200,mr:"2em"},renderInput:function(e){return(0,N.jsx)(Z.Z,(0,u.Z)((0,u.Z)({},e),{},{label:"general"}))}}),(0,N.jsx)(g.Z,{inputValue:H.view,fontFamily:"inherit",size:"medium",onInputChange:function(e,n){M((0,u.Z)((0,u.Z)({},H),{},{view:n}))},name:"view",options:P,sx:{width:200},renderInput:function(e){return(0,N.jsx)(Z.Z,(0,u.Z)((0,u.Z)({},e),{},{label:"public"}))}})]}),(0,N.jsx)(a.Z,{my:"2em",children:(0,N.jsx)(G.UP,{required:!0,placeholder:"What do you want to talk about?",label:"Title",sx:{width:"100%",fontFamily:"fantasy"},variant:"outlined",size:"medium",onChange:function(e){M((0,u.Z)((0,u.Z)({},H),{},{title:e.target.value}))},value:H.title})}),(0,N.jsx)(a.Z,{my:"2em",children:(0,N.jsx)(x.Z,{title:"description must not be less than 20 characters",placement:"top-start",children:(0,N.jsx)(G.UP,{required:!0,label:"Description",placeholder:"What's on your mind",sx:{width:"100%"},variant:"outlined",size:"medium",onChange:K,value:H.description,name:"description",multiline:!0})})}),(0,N.jsx)(a.Z,{children:(0,N.jsx)(c.Z,{component:"h4",variant:"'p",color:"GrayText",children:"Choose blog image:"})}),(0,N.jsxs)(a.Z,{my:"2em",sx:{display:"flex",alignItems:"center"},children:[(0,N.jsx)(x.Z,{placement:"top-start",title:"for better resolutions use a landscape image ",children:(0,N.jsx)(a.Z,{children:(0,N.jsx)(G.UP,{type:"file",variant:"outlined",size:"medium",onChange:K,name:"image"})})}),(0,N.jsx)(a.Z,{children:(0,N.jsx)(A.Z,{sx:{marginLeft:"2em"},variant:"contained",size:"large",color:"success",onClick:J,loading:X,disabled:!f,startIcon:(0,N.jsx)(L.Z,{}),children:"Upload"})})]}),(0,N.jsx)(v.Z,{}),(0,N.jsx)(O.Z,{children:(0,N.jsxs)(l.Z,{direction:"row",spacing:{xs:1,sm:2},children:[(0,N.jsx)(F.Z,{sx:{width:{xs:"100px",sm:"150px"}},variant:"text",size:"medium",color:"error",endIcon:(0,N.jsx)(k.Z,{}),onClick:function(){U((0,C.TOGGLE_ISMODALOPEN)(!1))},children:"Cancel"}),(0,N.jsx)(A.Z,{type:"submit",loading:X,variant:"text",color:"success",size:"medium",sx:{width:{xs:"100px",sm:"150px"}},endIcon:(0,N.jsx)(B.Z,{}),children:"Publish"})]})})]})})]})]})},M=t(1939),U=t(9313),W=t(7689),X=t(6517),V=t(3449),$=t(9502),Y=t(2851);function q(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e}var K=["technology","science","politics","history","health and fitness","coding","general"],J=["oldest","newest"],Q=function(){var e=(0,b.useState)(""),n=(0,d.Z)(e,2),t=n[0],o=n[1],s=(0,b.useState)(""),_=(0,d.Z)(s,2),E=_[0],T=_[1],I=(0,b.useState)("1"),O=(0,d.Z)(I,2),F=O[0],A=O[1],L=(0,b.useState)(!1),k=(0,d.Z)(L,2),B=k[0],D=k[1],R=(0,w.I0)(),P=(0,W.s0)(),z=(0,w.v9)(y.blogsSelector),Q=(0,w.v9)(y.loadingSelector);(0,b.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,i,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R((0,C.FETCH_BLOGS_START)()),e.prev=1,e.next=4,S.Z.get("https://reader-blogging-web.onrender.com/api/v1/posts/allPosts?tags=".concat(t,"&sort=").concat(E),{withCredentials:!0});case 4:n=e.sent,i=n.data,o=q((null===i||void 0===i?void 0:i.blogs)||[]),R((0,C.FETCH_BLOGS_SUCCESS)(o)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),R((0,C.FETCH_BLOGS_FAILED)(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.msg));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,t,i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R((0,C.FETCH_BLOGS_START)()),e.prev=1,e.next=4,S.Z.get("https://reader-blogging-web.onrender.com/api/v1/posts/followerposts",{withCredentials:!0});case 4:n=e.sent,t=n.data,i=q((null===t||void 0===t?void 0:t.posts)||[]),R((0,C.FETCH_BLOGS_SUCCESS)(i)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),R((0,C.FETCH_BLOGS_FAILED)(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.msg));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();"1"===F&&e(),"2"===F&&n()}),[t,E,B,F]);var ee=function(){return(0,N.jsx)(N.Fragment,{children:Q?(0,N.jsx)(M.Z,{}):(0,N.jsx)(a.Z,{children:z&&z.map((function(e){return(0,N.jsx)(p.Z,{sx:{cursor:"pointer"},onClick:function(){return n=e._id,void P("/content/blog/".concat(n));var n},children:(0,N.jsxs)(l.Z,{direction:"column",py:"2em",px:".5em",pb:"1em",children:[(0,N.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",mb:{xs:"1em",sm:"0em"}},children:[(0,N.jsx)(f.Z,{src:e.profileImage,alt:e.name}),(0,N.jsx)(c.Z,{ml:{xs:".5em",sm:"1em"},component:"h3",variant:"p",fontWeight:600,children:e.name})]}),(0,N.jsxs)(l.Z,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"start",sm:"center"},display:"flex",children:[(0,N.jsxs)(a.Z,{flex:5,order:{xs:2,sm:1},children:[(0,N.jsx)(c.Z,{component:"h2",my:{xs:"1em",sm:".5em"},variant:"p",fontWeight:800,children:e.title}),(0,N.jsx)(c.Z,{mr:".5em",className:"fade-description fade-description-lines",component:"p",children:e.description}),(0,N.jsxs)(l.Z,{my:"1em",direction:"row",alignItems:"center",display:"flex",justifyContent:"space-between",children:[(0,N.jsx)(m.Z,{variant:"filled",label:e.tags,size:"large"}),(0,N.jsxs)(a.Z,{alignSelf:"flex-end",display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,N.jsx)(c.Z,{display:{xs:"none",sm:"block"},color:"GrayText",fontSize:"15px",children:(0,X.p)(e.createdAt)}),(0,N.jsx)(x.Z,{title:"save",sx:{ml:"1em",mr:"1em"},children:(0,N.jsx)(h.Z,{children:(0,N.jsx)(U.Z,{})})})]})]})]}),(0,N.jsx)(a.Z,{flex:2,order:{xs:1,sm:2},children:(0,N.jsx)("img",{className:"blog-image",style:{objectFit:"cover"},src:e.image,alt:e.title})})]}),(0,N.jsx)(v.Z,{})]})},e._id)}))})})};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(H,{setFetchNewOnCreate:D}),(0,N.jsxs)(G.mI,{p:{xs:"0em",sm:"2em"},children:[(0,N.jsx)(G.Yb,{sx:{my:"2em",px:{xs:"1em",sm:"2em"}},component:"form",children:(0,N.jsxs)(l.Z,{direction:{xs:"column",sm:"row"},justifyContent:"right",alignItems:"center",children:[(0,N.jsx)(g.Z,{value:t,fontFamily:"inherit",size:"medium",onChange:function(e,n){o(n)},name:"tags",options:K,sx:{width:200,mr:{xs:"0em",sm:"2em"},mb:{xs:"1em",sm:"0em"}},renderInput:function(e){return(0,N.jsx)(Z.Z,(0,u.Z)((0,u.Z)({},e),{},{label:"catogories"}))}}),(0,N.jsx)(g.Z,{value:E,fontFamily:"inherit",size:"medium",onChange:function(e,n){T(n)},name:"filter",options:J,sx:{width:200},renderInput:function(e){return(0,N.jsx)(Z.Z,(0,u.Z)((0,u.Z)({},e),{},{label:"sort by"}))}})]})}),(0,N.jsxs)(a.Z,{my:"2em",children:[(0,N.jsxs)(V.ZP,{value:F,children:[(0,N.jsx)(a.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,N.jsxs)($.Z,{onChange:function(e,n){A(n)},"aria-label":"tabs",children:[(0,N.jsx)(j.Z,{label:"All",value:"1"}),(0,N.jsx)(j.Z,{label:"Followings",value:"2"})]})}),(0,N.jsx)(Y.Z,{value:"1",children:ee()}),(0,N.jsx)(Y.Z,{value:"2",children:ee()})]}),!Q&&0===(null===z||void 0===z?void 0:z.length)&&(0,N.jsx)(c.Z,{my:"1em",variant:"h3",component:"p",fontWeight:800,textAlign:"center",children:"No Blogs Found"})]})]})]})},ee=t(3612),ne=t(7412),te=function(e){var n=e.user,t=n.profileImage,r=n.name,i=n.bio,o=n._id,s=e.addToFollowing,l=(0,W.s0)();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(a.Z,{sx:{cursor:"pointer"},display:"flex",my:"2em",alignItems:"center",children:[(0,N.jsx)(x.Z,{title:r,children:(0,N.jsx)(f.Z,{onClick:function(){l("/profile/".concat(o))},sx:{width:24,height:24,alignSelf:"flex-start"},flex:1,src:t,alt:r})}),(0,N.jsxs)(a.Z,{ml:"1em",flex:1.5,children:[(0,N.jsx)(c.Z,{variant:"p",component:"h3",fontWeight:800,children:r}),(0,N.jsx)(c.Z,{lineHeight:"30px",color:"GrayText",component:"p",variant:"p",children:"".concat(i.slice(0,30),"...")||0})]}),(0,N.jsx)(x.Z,{title:"follow ".concat(r," to see their posts"),children:(0,N.jsx)(F.Z,{onClick:function(){return s(o)},flex:1,variant:"outlined",color:"inherit",children:"Follow"})})]}),(0,N.jsx)(v.Z,{})]})},re=function(){var e=(0,w.v9)(ee.$m),n=(0,w.I0)(),t=(0,w.v9)(R.f8),u=(0,w.v9)(R.Bj),d=(0,w.v9)(R.x$),p=(0,w.v9)(R.VR),f=(0,w.v9)(ee.uR),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n((0,D.GA)()),e.prev=1,e.next=4,S.Z.post("https://reader-blogging-web.onrender.com/api/v1/followers",{followerId:t},{withCredentials:!0});case 4:i=e.sent,o=i.data,n((0,ne.FETCH_USER_FOLLOWERS)(null===o||void 0===o?void 0:o.users)),n((0,D.pX)("you are now following ".concat(null===o||void 0===o?void 0:o.follower)||0)),n((0,D.S1)(!0)),setTimeout((function(){n((0,D.S1)(!1))}),4e3),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),n((0,D.Go)()),n((0,D.pX)((null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.msg)||"\u274c failed to follow")),n((0,D.S1)(!0)),setTimeout((function(){n((0,D.S1)(!1))}),4e3);case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.get("https://reader-blogging-web.onrender.com/api/v1/auth/users",{withCredentials:!0});case 3:t=e.sent,i=t.data,n((0,ne.FETCH_ALL_USERS)(null===i||void 0===i?void 0:i.users)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,b.useEffect)((function(){x()}),[f]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.Z,{open:d,anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,N.jsx)(s.Z,{severity:t?"error":"success",children:u})}),(0,N.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",children:[(0,N.jsx)(a.Z,{flex:{xs:10,sm:5},children:(0,N.jsx)(Q,{})}),(0,N.jsx)(a.Z,{position:"relative",overflow:"hidden",height:"100vh",flex:2,display:{xs:"none",sm:"block"},bgcolor:"ghostwhite",children:(0,N.jsxs)(a.Z,{height:"100%",position:"absolute",top:"0px",bottom:"0px",right:"0px",p:"1em",overflow:"auto",className:"scrollbar-hidden",children:[e.length>0&&(0,N.jsx)(c.Z,{fontWeight:800,component:"p",variant:"p",fontSize:"1.6rem",children:"Who to Follow \ud83d\udc47"}),e&&e.map((function(e){return(0,N.jsx)(te,{user:e,addToFollowing:m,loadingAction:p},e._id)})),!e.length&&(0,N.jsx)(c.Z,{component:"p",fontWeight:800,variant:"p",children:"No one to follow for now"})]})})]})]})}},8594:function(e,n,t){"use strict";t.d(n,{UP:function(){return l},Yb:function(){return s},mI:function(){return a}});var r=t(6934),i=t(4554),o=t(3392),s=(0,r.ZP)(i.Z)((function(e){return{}})),l=(0,r.ZP)(o.Z)((function(e){return{}})),a=(0,r.ZP)(i.Z)((function(e){return{}}))},9029:function(e,n,t){"use strict";t.d(n,{Bj:function(){return o},VR:function(){return r},f8:function(){return i},x$:function(){return s}});var r=function(e){return e.actions.isLoading},i=function(e){return e.actions.error},o=function(e){return e.actions.snackBarMessage},s=function(e){return e.actions.isSnackBarOpen}},8431:function(e,n,t){"use strict";t.d(n,{GA:function(){return i},Go:function(){return l},S1:function(){return o},pX:function(){return s}});var r=t(5627).ACTION_ACTION_TYPES,i=function(){return{type:r.SET_IS_LOADING}},o=function(e){return{type:r.SET_SNACKBAR_OPEN,payload:e}},s=function(e){return{type:r.SET_SNACKBAR_MESSAGE,payload:e}},l=function(e){return{type:r.SET_ERROR,payload:e}}},9497:function(e,n,t){var r=t(5732);e.exports={FETCH_BLOGS_START:function(){return{type:r.SET_BLOGS_START}},FETCH_BLOGS_SUCCESS:function(e){return{type:r.SET_BLOGS_SUCCESS,payload:e}},FETCH_BLOGS_FAILED:function(e){return{type:r.SET_BLOGS_FAILED,payload:e}},TOGGLE_ISMODALOPEN:function(e){return{type:r.SET_ISMODALOPEN,payload:e}}}},6801:function(e){e.exports={blogsReducerSelector:function(e){return e.blogs},blogsSelector:function(e){return e.blogs.blogs},errorSelector:function(e){return e.blogs.error},loadingSelector:function(e){return e.blogs.isLoading},isModalOpenSelector:function(e){return e.blogs.isModalOpen}}},3612:function(e,n,t){"use strict";t.d(n,{$m:function(){return s},EI:function(){return i},U$:function(){return o},ib:function(){return r},uR:function(){return l}});var r=function(e){return e.user.currentUser},i=function(e){return e.user.error},o=function(e){return e.user.isLoading},s=function(e){return e.user.users},l=function(e){return e.user.followers}},1006:function(){}}]);
//# sourceMappingURL=567.63367224.chunk.js.map