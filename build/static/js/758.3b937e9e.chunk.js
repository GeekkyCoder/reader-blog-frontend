(self.webpackChunkclient=self.webpackChunkclient||[]).push([[758],{7758:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var i=t(6314),r=t(4554),s=t(7047),o=t(1413),a=t(4165),c=t(5861),l=t(9439),u=t(5699),d=t(3392),x=t(9164),m=t(3044),p=t(890),f=t(1918),h=t(68),Z=t(3400),g=t(4721),v=t(1243),j=(t(1006),t(2791)),S=t(9434),y=t(6801),b=t(9497),w=t(4942),C=t(3543),_=t(4070),E=t(5289),T=t(5661),I=t(9157),O=t(7123),G=t(6151),A=t(8594),L=t(9709),k=t(5683),B=t(7893),D=t(9574),F=t(8431),z=t(9029),P=t(184),M=["public","private","followers"],N=["technology","science","politics","history","health and fitness","coding","general"],R=function(){var e=(0,j.useState)(!1),n=(0,l.Z)(e,2),t=n[0],s=n[1],x=(0,j.useState)({title:"",description:"",image:"",tags:"",view:""}),m=(0,l.Z)(x,2),f=m[0],Z=m[1],R=(0,S.I0)(),H=(0,S.v9)(y.isModalOpenSelector),U=(0,S.v9)(z.VR),W=(0,S.v9)(z.Bj),V=(0,S.v9)(z.x$),X=(0,S.v9)(z.f8),Y=(0,S.v9)(z.rs);console.log(Y.isSnackBarOpen),console.log(Y.snackBarMessage);var q=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var t,i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),f.title&&f.description){e.next=3;break}return e.abrupt("return");case 3:return t={title:f.title,description:f.description,image:f.image||"https://images.unsplash.com/photo-1542254503-d802f00c2342?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1032&q=80",tags:f.tags||"general",view:f.view||"public"},R((0,F.GA)()),e.prev=5,e.next=8,v.Z.post("/api/v1/posts/createPost",t);case 8:R((0,F.pX)("posted")),s(!1),R((0,F.S1)(!0)),setTimeout((function(){R((0,F.S1)(!1))}),3e3),R((0,b.TOGGLE_ISMODALOPEN)(!1)),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(5),R((0,F.S1)(!0)),R((0,F.pX)("failed to post")),R((0,F.Go)((null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.msg)||"failed to post")),setTimeout((function(){R((0,F.S1)(!1))}),3e3);case 21:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(n){return e.apply(this,arguments)}}(),K=function(e){e.preventDefault();var n=e.target,t=n.name,i=n.value;"file"===n.type?(Z((0,o.Z)((0,o.Z)({},f),{},(0,w.Z)({},t,e.target.files[0]))),s(!0)):Z((0,o.Z)((0,o.Z)({},f),{},(0,w.Z)({},t,i)))},$=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var t,i,r,s,c,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.image,(i=new FormData).append("file",t),i.append("upload_preset","lfueeeon"),R((0,F.GA)()),e.prev=5,e.next=8,v.Z.post("https://api.cloudinary.com/v1_1/dczhcauwf/image/upload",i);case 8:r=e.sent,s=r.data,Z((0,o.Z)((0,o.Z)({},f),{},{image:s.secure_url})),R((0,F.S1)(!0)),R((0,F.pX)("image uploaded successfully!")),setTimeout((function(){R((0,F.S1)(!1))}),3e3),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(5),R((0,F.Go)((null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.msg)||"failed to upload image!")),R((0,F.S1)(!0)),R((0,F.pX)("failed tp upload image")),setTimeout((function(){R((0,F.S1)(!1))}),3e3);case 22:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(n){return e.apply(this,arguments)}}();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(C.Z,{message:W,open:V,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,P.jsx)(_.Z,{variant:"filled",severity:X?"error":"success",children:W})}),(0,P.jsxs)(E.Z,{sx:{fontFamily:"cursive"},open:H,fullWidth:!0,maxWidth:"lg",keepMounted:!0,children:[(0,P.jsx)(T.Z,{children:"Create A Blog"}),(0,P.jsx)(g.Z,{}),(0,P.jsx)(I.Z,{children:(0,P.jsxs)(A.Yb,{onSubmit:q,component:"form",sx:{display:"flex",flexDirection:"column"},children:[(0,P.jsxs)(i.Z,{direction:"row",justifyContent:"right",alignItems:"center",children:[(0,P.jsx)(u.Z,{inputValue:f.tags,fontFamily:"inherit",size:"medium",onInputChange:function(e,n){Z((0,o.Z)((0,o.Z)({},f),{},{tags:n}))},name:"tags",options:N,sx:{width:200,mr:"2em"},renderInput:function(e){return(0,P.jsx)(d.Z,(0,o.Z)((0,o.Z)({},e),{},{label:"general"}))}}),(0,P.jsx)(u.Z,{inputValue:f.view,fontFamily:"inherit",size:"medium",onInputChange:function(e,n){Z((0,o.Z)((0,o.Z)({},f),{},{view:n}))},name:"view",options:M,sx:{width:200},renderInput:function(e){return(0,P.jsx)(d.Z,(0,o.Z)((0,o.Z)({},e),{},{label:"public"}))}})]}),(0,P.jsx)(r.Z,{my:"2em",children:(0,P.jsx)(A.UP,{required:!0,placeholder:"What do you want to talk about?",label:"Title",sx:{width:"100%",fontFamily:"fantasy"},variant:"outlined",size:"medium",onChange:function(e){Z((0,o.Z)((0,o.Z)({},f),{},{title:e.target.value}))},value:f.title})}),(0,P.jsx)(r.Z,{my:"2em",children:(0,P.jsx)(h.Z,{title:"description must not be less than 20 characters",placement:"top-start",children:(0,P.jsx)(A.UP,{required:!0,label:"Description",placeholder:"What's on your mind",sx:{width:"100%"},variant:"outlined",size:"medium",onChange:K,value:f.description,name:"description",multiline:!0})})}),(0,P.jsx)(r.Z,{children:(0,P.jsx)(p.Z,{component:"h4",variant:"'p",color:"GrayText",children:"Choose blog image:"})}),(0,P.jsxs)(r.Z,{my:"2em",sx:{display:"flex",alignItems:"center"},children:[(0,P.jsx)(h.Z,{placement:"top-start",title:"for better resolutions use a landscape image ",children:(0,P.jsx)(r.Z,{children:(0,P.jsx)(A.UP,{type:"file",variant:"outlined",size:"medium",onChange:K,name:"image"})})}),(0,P.jsx)(r.Z,{children:(0,P.jsx)(L.Z,{sx:{marginLeft:"2em"},variant:"contained",size:"large",color:"success",onClick:$,loading:U,disabled:!t,startIcon:(0,P.jsx)(k.Z,{}),children:"Upload"})})]}),(0,P.jsx)(g.Z,{}),(0,P.jsx)(O.Z,{children:(0,P.jsxs)(i.Z,{direction:"row",spacing:{xs:1,sm:2},children:[(0,P.jsx)(G.Z,{sx:{width:{xs:"100px",sm:"150px"}},variant:"text",size:"medium",color:"error",endIcon:(0,P.jsx)(B.Z,{}),onClick:function(){R((0,b.TOGGLE_ISMODALOPEN)(!1))},children:"Cancel"}),(0,P.jsx)(L.Z,{type:"submit",loading:U,variant:"text",color:"success",size:"medium",sx:{width:{xs:"100px",sm:"150px"}},endIcon:(0,P.jsx)(D.Z,{}),children:"Publish"})]})})]})})]})]})},H=t(1939),U=t(9313),W=t(7689),V=t(6517),X=["technology","science","politics","history","health and fitness","coding","general"],Y=["oldest","newest"],q=function(){var e=(0,j.useState)(""),n=(0,l.Z)(e,2),t=n[0],s=n[1],w=(0,j.useState)(""),C=(0,l.Z)(w,2),_=C[0],E=C[1],T=(0,j.useState)(1),I=(0,l.Z)(T,2),O=(I[0],I[1],(0,S.I0)()),G=(0,W.s0)(),L=(0,S.v9)(y.blogsSelector),k=(0,S.v9)(y.loadingSelector);(0,j.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var n,i,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O((0,b.FETCH_BLOGS_START)()),e.prev=1,e.next=4,v.Z.get("/api/v1/posts/allPosts?tags=".concat(t,"&sort=").concat(_));case 4:n=e.sent,i=n.data,O((0,b.FETCH_BLOGS_SUCCESS)(null===i||void 0===i?void 0:i.blogs)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),O((0,b.FETCH_BLOGS_FAILED)(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.msg));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,_]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(R,{}),(0,P.jsxs)(A.mI,{p:{xs:"0em",sm:"2em"},children:[(0,P.jsx)(A.Yb,{sx:{my:"2em",px:{xs:"1em",sm:"2em"}},component:"form",children:(0,P.jsxs)(i.Z,{direction:{xs:"column",sm:"row"},justifyContent:"right",alignItems:"center",children:[(0,P.jsx)(u.Z,{value:t,fontFamily:"inherit",size:"medium",onChange:function(e,n){s(n)},name:"tags",options:X,sx:{width:200,mr:{xs:"0em",sm:"2em"},mb:{xs:"1em",sm:"0em"}},renderInput:function(e){return(0,P.jsx)(d.Z,(0,o.Z)((0,o.Z)({},e),{},{label:"catogories"}))}}),(0,P.jsx)(u.Z,{value:_,fontFamily:"inherit",size:"medium",onChange:function(e,n){E(n)},name:"filter",options:Y,sx:{width:200},renderInput:function(e){return(0,P.jsx)(d.Z,(0,o.Z)((0,o.Z)({},e),{},{label:"sort by"}))}})]})}),k?(0,P.jsx)(H.Z,{}):(0,P.jsx)(r.Z,{children:L&&L.map((function(e){return(0,P.jsx)(x.Z,{onClick:function(){return n=e._id,void G("/content/blog/".concat(n));var n},children:(0,P.jsxs)(i.Z,{direction:"column",py:"2em",px:".5em",pb:"1em",children:[(0,P.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",mb:{xs:"1em",sm:"0em"}},children:[(0,P.jsx)(m.Z,{src:e.profileImage,alt:e.name}),(0,P.jsx)(p.Z,{ml:{xs:".5em",sm:"1em"},component:"h3",variant:"p",fontWeight:600,children:e.name})]}),(0,P.jsxs)(i.Z,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"start",sm:"center"},display:"flex",children:[(0,P.jsxs)(r.Z,{flex:5,order:{xs:2,sm:1},children:[(0,P.jsx)(p.Z,{component:"h2",my:{xs:"1em",sm:".5em"},variant:"p",fontWeight:800,children:e.title}),(0,P.jsx)(p.Z,{mr:".5em",className:"fade-description fade-description-lines",component:"p",children:e.description}),(0,P.jsxs)(i.Z,{my:"1em",direction:"row",alignItems:"center",display:"flex",justifyContent:"space-between",children:[(0,P.jsx)(f.Z,{variant:"filled",label:e.tags,size:"large"}),(0,P.jsxs)(r.Z,{display:"flex",alignItems:"center",children:[(0,P.jsx)(p.Z,{color:"GrayText",fontSize:"15px",children:(0,V.p)(e.createdAt)}),(0,P.jsx)(h.Z,{title:"save",sx:{ml:"1em",mr:"1em"},children:(0,P.jsx)(Z.Z,{children:(0,P.jsx)(U.Z,{})})})]})]})]}),(0,P.jsx)(r.Z,{flex:2,order:{xs:1,sm:2},children:(0,P.jsx)("img",{className:"blog-image",style:{objectFit:"cover"},src:e.image,alt:e.title})})]}),(0,P.jsx)(g.Z,{})]})},e._id)}))})]})]})},K=function(){return(0,P.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",children:[(0,P.jsx)(r.Z,{flex:{xs:10,sm:5},children:(0,P.jsx)(q,{})}),(0,P.jsxs)(r.Z,{height:"100vh",flex:1,display:{xs:"none",sm:"block"},children:[(0,P.jsx)(r.Z,{position:"fixed",children:"Sidebar under development"}),(0,P.jsxs)(i.Z,{spacing:1,children:[(0,P.jsx)(s.Z,{variant:"text",sx:{fontSize:"1rem"}}),(0,P.jsx)(s.Z,{variant:"circular",width:40,height:40}),(0,P.jsx)(s.Z,{variant:"rectangular",width:210,height:60}),(0,P.jsx)(s.Z,{variant:"rounded",width:210,height:60})]}),(0,P.jsxs)(i.Z,{spacing:1,children:[(0,P.jsx)(s.Z,{variant:"text",sx:{fontSize:"1rem"}}),(0,P.jsx)(s.Z,{variant:"circular",width:40,height:40}),(0,P.jsx)(s.Z,{variant:"rectangular",width:210,height:60}),(0,P.jsx)(s.Z,{variant:"rounded",width:210,height:60})]}),(0,P.jsxs)(i.Z,{spacing:1,children:[(0,P.jsx)(s.Z,{variant:"text",sx:{fontSize:"1rem"}}),(0,P.jsx)(s.Z,{variant:"circular",width:40,height:40}),(0,P.jsx)(s.Z,{variant:"rectangular",width:210,height:60}),(0,P.jsx)(s.Z,{variant:"rounded",width:210,height:60})]})]})]})}},1939:function(e,n,t){"use strict";var i=t(6314),r=t(3239),s=t(184);n.Z=function(){return(0,s.jsx)(i.Z,{sx:{color:"grey.600"},spacing:2,direction:"row",justifyContent:"center",children:(0,s.jsx)(r.Z,{color:"inherit"})})}},8594:function(e,n,t){"use strict";t.d(n,{UP:function(){return a},Yb:function(){return o},mI:function(){return c}});var i=t(6934),r=t(4554),s=t(3392),o=(0,i.ZP)(r.Z)((function(e){return{}})),a=(0,i.ZP)(s.Z)((function(e){return{}})),c=(0,i.ZP)(r.Z)((function(e){return{}}))},9029:function(e,n,t){"use strict";t.d(n,{Bj:function(){return o},VR:function(){return r},f8:function(){return s},rs:function(){return i},x$:function(){return a}});var i=function(e){return e.actions},r=function(e){return e.actions.isLoading},s=function(e){return e.actions.error},o=function(e){return e.actions.snackBarMessage},a=function(e){return e.actions.isSnackBarOpen}},8431:function(e,n,t){"use strict";t.d(n,{GA:function(){return r},Go:function(){return a},S1:function(){return s},pX:function(){return o}});var i=t(5627).ACTION_ACTION_TYPES,r=function(){return{type:i.SET_IS_LOADING}},s=function(e){return{type:i.SET_SNACKBAR_OPEN,payload:e}},o=function(e){return{type:i.SET_SNACKBAR_MESSAGE,payload:e}},a=function(e){return{type:i.SET_ERROR,payload:e}}},9497:function(e,n,t){var i=t(5732);e.exports={FETCH_BLOGS_START:function(){return{type:i.SET_BLOGS_START}},FETCH_BLOGS_SUCCESS:function(e){return{type:i.SET_BLOGS_SUCCESS,payload:e}},FETCH_BLOGS_FAILED:function(e){return{type:i.SET_BLOGS_FAILED,payload:e}},TOGGLE_ISMODALOPEN:function(e){return{type:i.SET_ISMODALOPEN,payload:e}}}},6801:function(e){e.exports={blogsReducerSelector:function(e){return e.blogs},blogsSelector:function(e){return e.blogs.blogs},errorSelector:function(e){return e.blogs.error},loadingSelector:function(e){return e.blogs.isLoading},isModalOpenSelector:function(e){return e.blogs.isModalOpen}}},6517:function(e,n,t){"use strict";t.d(n,{p:function(){return i}});var i=function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}},1006:function(){}}]);
//# sourceMappingURL=758.3b937e9e.chunk.js.map